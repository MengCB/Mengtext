<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			body {
				position: relative;
				background-image: url(https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1562765987881&di=e5f9e1e1c7d7820f1a530e09c926b286&imgtype=0&src=http%3A%2F%2Fb.zol-img.com.cn%2Fdesk%2Fbizhi%2Fstart%2F4%2F1392343136535.jpg);
				background-size: 100%;
				background-repeat: no-repeat;
			}

			.rain {
				position: absolute;
				background-color: azure;
				border: 1px solid azure;
				background-size: 100%;
				border-radius: 50%;
				width: 12px;
				height: 12px;
			}

			.myButton {
				width: 50px;
			}

			.myButton:hover {
				background-color: yellowgreen;
			}

			.total {
				position: absolute;
				text-align: center;
				width: 150px;
				height: 120px;
				background-color: cornflowerblue;
				left: 50%;
				font-size: 82px;
				color: antiquewhite;
				border-radius: 5px;
			}
		</style>
	</head>
	<body>
		<br>
		<br>
		下落速度：<input id="text1" type="text" style="width: 150px;" />
		<br>
		产生频率：<input id="text2" type="text" style="width: 150px;" />
		<br>
		<br>
		修改动画：<input id="text3" type="button" style="width: 100px;" value="修改动画" onclick="getTextValue()" />
		<br>
		<div class="total" id="total"></div>
	</body>
</html>
<script type="text/javascript">
	function getTextValue() {
		var fallSpeed = document.getElementById("text1").value;
		var createHZ = document.getElementById("text2").value;
		//容错
		if (!fallSpeed || isNaN(fallSpeed) || !createHZ || isNaN(createHZ)) {
			console.info("参数非数字");
			//没有值不处理
		} else {
			settingAnimate(fallSpeed, createHZ);
		}
	}
</script>

<script type="text/javascript">
	var rainCount = 0; //当前雨滴数量
	var rainMax = 10000; //雨滴总数量
	var yourTotal = 0; //点击到时计数

	function doRainFall(fallingSpeed) {
		if (rainCount >= rainMax) {
			return;
		}
		if (!fallingSpeed) {
			fallingSpeed = 100;
		}
		var rainFall = document.createElement('div'); //创建div
		rainFall.setAttribute("class", "rain");
		rainFall.style.top = "0px";
		rainFall.style.left = Math.random() * 100 + "%";
		document.body.appendChild(rainFall); //把创建的div添加到body里面
		rainCount += 1;
		var rainTimer = setInterval(function() {
			var newTop = rainFall.style.top.replace("px", "");
			newTop = parseFloat(newTop);
			newTop += Math.floor(Math.random() * 15 + 5); //newTop += 10;
			//落到地面的时候让它消失
			if (newTop >= 800) {
				rainFall.remove();
				rainCount -= 1;
				clearInterval(rainTimer);
			}
			rainFall.style.top = newTop + "px";
		}, fallingSpeed); //下落速度(距离)
		rainFall.onmouseover = function() {
			clearInterval(rainTimer);
			rainFall.remove(); //鼠标点击时消失
			rainCount -= 1;
			yourTotal += 1;
			document.getElementById("total").innerText = yourTotal;
		}
	}
	var doRain = setInterval(function() {
		doRainFall(200); //下落速度
	}, 200);
	//调整动画的函数
	function settingAnimate(fallingSpeed, createHZ) {
		clearInterval(doRain);
		doRain = setInterval(function() {
			doRainFall(fallingSpeed); //下落速度
		}, createHZ); //下落频率
	}
</script>
