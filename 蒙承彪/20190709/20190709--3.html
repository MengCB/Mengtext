<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>dom-3 rainFall</title>
		<style type="text/css">
			body {
				position: relative;
				background-image: url(http://pic.90sjimg.com/back_pic/qk/back_origin_pic/00/03/44/94f338bd3cd11e9745bdd969a2c07863.jpg);
			    background-size: 100%;
				background-repeat: no-repeat;
			}

			.rain {
				position: absolute;
				background-color: azure;
				border: 1px solid azure;
				border-radius: 50%;
				width: 12px;
				height: 12px;
			}
		</style>
	</head>
	<body>
		<!-- <div class="rain"></div> -->
	</body>
</html>
<script type="text/jscript">
	var rainCount = 0; //当前雨滴数量
	var rainMax = 1000; //雨滴总数量
	function doRainFall() {
		if (rainCount >= rainMax) {
			return;
		}
		var rainFall = document.createElement('div'); //创建div
		rainFall.setAttribute("class", "rain");

		rainFall.style.top = "0px";
		rainFall.style.left = Math.random() * 100 + "%";
		document.body.appendChild(rainFall);//把创建的div添加到body里面
		rainCount += 1;

		var rainTimer = setInterval(function() {
			var newTop = rainFall.style.top.replace("px", "");
			newTop = parseFloat(newTop);
			newTop += Math.floor(Math.random() * 15 + 5); //newTop += 10;
			//落到地面的时候让它消失
			if (newTop >= 880) {
				rainFall.remove();
				rainCount -= 1;
				clearInterval(rainTimer);
			}
			rainFall.style.top = newTop + "px";
		}, 100);
	}

	var doRain = setInterval(function() {
		doRainFall();
	}, 800);
</script>
